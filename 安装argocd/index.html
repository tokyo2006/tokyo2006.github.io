<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: https://ogp.me/ns# fb: https://ogp.me/ns/fb#">
<head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="description" content="安装ArgoCD">
<meta name="keywords" content="devops, ArgoCD, ">

 
<meta property="og:type" content="article"/>
<meta property="og:description" content="安装ArgoCD"/>
<meta property="og:title" content="安装ArgoCD : blog.lkjxblog.site"/>
<meta property="og:site_name" content="blog.lkjxblog.site is Chen Zeng"/>
<meta property="og:image" content="" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="" />
<meta property="og:image:height" content="" />
<meta property="og:url" content="https://blog.lkjxblog.site/%E5%AE%89%E8%A3%85argocd/">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-02-24"/>
<meta property="article:modified_time" content="2025-02-24"/>



<meta property="article:tag" content="devops">
<meta property="article:tag" content="ArgoCD">





<meta name="twitter:card" content="summary">

<meta name="twitter:site" content="@rurounikexin">
<meta name="twitter:title" content="安装ArgoCD : blog.lkjxblog.site">
<meta name="twitter:creator" content="@rurounikexin">
<meta name="twitter:description" content="安装ArgoCD">
<meta name="twitter:image:src" content="">
<meta name="twitter:domain" content="blog.lkjxblog.site">



    <base href="https://blog.lkjxblog.site/">
    <title>安装ArgoCD - blog.lkjxblog.site</title>
    <link rel="canonical" href="https://blog.lkjxblog.site/%E5%AE%89%E8%A3%85argocd/">
    

    <link href='//fonts.googleapis.com/css?family=Fjalla+One|Open+Sans:300' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="https://blog.lkjxblog.site//css/nixon.css">

    <link rel="shortcut icon" href="https://blog.lkjxblog.site//favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="https://blog.lkjxblog.site//apple-touch-icon.png" />
</head>

<body lang="en" itemscope itemtype="https://schema.org/Article">
<header id="header">
    <figure>
      <a href="https://blog.lkjxblog.site//" border=0 id="logolink"><div class="icon-nixon-home" id="logo"> </div></a>
    </figure>
    <div id="byline">by Chen Zeng</div>
    <nav id="nav">
            <ul id="mainnav">
            <li>
                <a href="https://blog.lkjxblog.site//">
                <span class="icon"> <i aria-hidden="true" class="icon-nixon-quill"></i></span>
                <span> blog </span>
            </a>
            </li>
            <li>
            <a href="https://blog.lkjxblog.site//project/">
                <span class="icon"> <i aria-hidden="true" class="icon-nixon-console"></i></span>
                <span> project </span>
            </a>
            </li>
            <li>
            <a href="https://blog.lkjxblog.site//talks/">
                <span class="icon"> <i aria-hidden="true" class="icon-nixon-talk"></i></span>
                <span> talks </span>
            </a>
            </li>
            <li>
            <a href="https://blog.lkjxblog.site//about/">
                <span class="icon"> <i aria-hidden="true" class="icon-nixon-linkedin"></i></span>
                <span> me </span>
            </a>
            </li>
        </ul>

        

    <ul id="social">
	<li id="share">
		<span class="icon icon-bubbles"> </span><span class="title"> share </span>
		<div class="dropdown share">
			<ul class="social">
				<li>
					<a href="https://twitter.com/intent/tweet?status=%e5%ae%89%e8%a3%85ArgoCD-https%3a%2f%2fblog.lkjxblog.site%2f%25E5%25AE%2589%25E8%25A3%2585argocd%2f" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a>
				</li>
				<li>
					<a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.lkjxblog.site%2f%25E5%25AE%2589%25E8%25A3%2585argocd%2f" target="_blank" title="Join me on Facebook" class="facebook"><span class="icon icon-facebook"></span>Facebook</a>
				</li>
				<li>
					<a href="https://plus.google.com/share?url=https%3a%2f%2fblog.lkjxblog.site%2f%25E5%25AE%2589%25E8%25A3%2585argocd%2f" target="_blank" title="Google+" class="googleplus"><span class="icon icon-google-plus"></span>Google+</a>
				</li>

				<li>
					<a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fblog.lkjxblog.site%2f%25E5%25AE%2589%25E8%25A3%2585argocd%2f&title=%e5%ae%89%e8%a3%85ArgoCD&source=https%3a%2f%2flinkedin.com%2fin%2fdawnzeng" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a>
				</li>

				<li>
					<a href="https://del.icio.us/post?url=https%3a%2f%2fblog.lkjxblog.site%2f%25E5%25AE%2589%25E8%25A3%2585argocd%2f" target="_blank" title="Delicious" class="delicious"><span class="icon icon-delicious"></span>Delicious</a>
				</li>
				<li>
					<a href="https://www.reddit.com/submit?url=https%3a%2f%2fblog.lkjxblog.site%2f%25E5%25AE%2589%25E8%25A3%2585argocd%2f" target="_blank" title="Reddit" class="reddit"><span class="icon icon-reddit"></span>Reddit</a>
				</li>
			</ul>
			<span class="subcount">sharing is caring</span>
		</div>
	</li>
	<li id="follow">
		<span class="icon icon-rocket"> </span><span class="title"> follow </span>
		<div class="dropdown follow">
			<ul class="social">


				<li>
					<a href="https://www.twitter.com/rurounikexin" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a>
				</li>


				<li>
					<a href="https://www.facebook.com/fei.jianxin" target="_blank" title="Join me on Facebook" class="facebook"><span class="icon icon-facebook"></span>Facebook</a>
				</li>


				<li>
					<a href="https://www.linkedin.com/in/dawnzeng" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a>
				</li>


				<li>
					<a href="https://github.com/tokyo2006" target="_blank" title="GitHub" class="github"><span class="icon icon-github"></span>GitHub</a>
				</li>



			</ul>
			<span class="subcount">join 10k+ subscribers &amp; followers</span>
		</div>
	</li>
</ul>

    </nav>
</header>



<section id="main">
  <h1 itemprop="name" id="title">安装ArgoCD</h1>
  <div>
        <article itemprop="articleBody" id="content">
           <pre><code>用过ArgoCD已经有一段时间了，准备写一些使用的心得算是工作的日常记录吧。
</code></pre>
<h2 id="什么是argocd">什么是ArgoCD?</h2>
<p>简单的说它是专门为部署在kubernetes上的应用进行持续交付的工具。</p>
<p>它已经从CNCF毕业了，作为云原生持续交付工具相较于传统的部署工具有着天生和kubernetes结合的优势。</p>
<h2 id="为什么要使用argocd">为什么要使用ArgoCD?</h2>
<ol>
<li><strong>自动化部署</strong>：ArgoCD可以自动化部署应用，减少人工干预，提高部署效率。</li>
<li><strong>持续交付</strong>：ArgoCD支持持续交付，可以自动检测代码变更并进行部署，确保应用的稳定性和可靠性。</li>
<li><strong>高可用性</strong>：ArgoCD支持高可用性，可以确保在集群故障时，应用仍然可以正常运行。</li>
<li><strong>安全性</strong>：ArgoCD支持多种安全策略，可以确保应用的安全性。</li>
<li><strong>易用性</strong>：ArgoCD界面友好，易于上手，适合各种规模的团队使用。</li>
<li><strong>可扩展性</strong>：ArgoCD可以扩展到多个集群，支持多租户，满足大规模应用的部署需求。</li>
<li><strong>多集群支持</strong>：ArgoCD支持多集群发布，可以轻松地在不同集群中进行应用的部署和管理。</li>
<li><strong>DaC(Deployment as Code)</strong>：所有的应用的部署配置都是声明式的，可以进行统一的版本管理和审计。</li>
</ol>
<h2 id="安装argocd">安装ArgoCD</h2>
<p>我一般都是用helm来安装ArgoCD,实际上官方是推荐使用kustomize来安装的。kustomize可以参考这里<a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/installation/#kustomize">installed by kustomize</a></p>
<h3 id="使用helm安装argocd">使用Helm安装ArgoCD</h3>
<ol>
<li>
<p>下载ArgoCD的Helm Chart</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>helm repo add argo https://argoproj.github.io/argo-helm
</span></span><span style="display:flex;"><span>helm repo update
</span></span><span style="display:flex;"><span>helm pull argo/argo-cd
</span></span><span style="display:flex;"><span>tar -zxvf argo-cd-x.x.x.tgz
</span></span></code></pre></div></li>
<li>
<p>设置高可用模式</p>
<p>在values.yaml文件中设置高可用模式。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">redis-ha</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">controller</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">server</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">autoscaling</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">minReplicas</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">repoServer</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">autoscaling</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">minReplicas</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">applicationSet</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">2</span>
</span></span></code></pre></div></li>
<li>
<p>Ingress配置</p>
<ul>
<li>SSL-Passthrough</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">global</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">domain</span>: <span style="color:#ae81ff">argocd.example.com</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">certificate</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">server</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ingress</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ingressClassName</span>: <span style="color:#ae81ff">nginx</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">annotations</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">nginx.ingress.kubernetes.io/force-ssl-redirect</span>: <span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">nginx.ingress.kubernetes.io/ssl-passthrough</span>: <span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">tls</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><ul>
<li>SSL Termination at Ingress Controller</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">global</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">domain</span>: <span style="color:#ae81ff">argocd.example.com</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">configs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">params</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server.insecure</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">server</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ingress</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ingressClassName</span>: <span style="color:#ae81ff">nginx</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">annotations</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">nginx.ingress.kubernetes.io/force-ssl-redirect</span>: <span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">nginx.ingress.kubernetes.io/backend-protocol</span>: <span style="color:#e6db74">&#34;HTTP&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">extraTls</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">hosts</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#ae81ff">argocd.example.com</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Based on the ingress controller used secret might be optional</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">secretName</span>: <span style="color:#ae81ff">wildcard-tls</span>
</span></span></code></pre></div><ul>
<li>Multiple ingress resources for gRPC protocol support</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">global</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">domain</span>: <span style="color:#ae81ff">argocd.example.com</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">configs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">params</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server.insecure</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">server</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ingress</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ingressClassName</span>: <span style="color:#ae81ff">contour-internal</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">extraTls</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">hosts</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#ae81ff">argocd.example.com</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">secretName</span>: <span style="color:#ae81ff">wildcard-tls</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">ingressGrpc</span>:
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">ingressClassName</span>: <span style="color:#ae81ff">contour-internal</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">extraTls</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">hosts</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#ae81ff">grpc.argocd.example.com</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">secretName</span>: <span style="color:#ae81ff">wildcard-tls</span>
</span></span></code></pre></div><ul>
<li>AWS Application Load Balancer</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">global</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">domain</span>: <span style="color:#ae81ff">argocd.example.com</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">configs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">params</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server.insecure</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">server</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ingress</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">controller</span>: <span style="color:#ae81ff">aws</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ingressClassName</span>: <span style="color:#ae81ff">alb</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">annotations</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">alb.ingress.kubernetes.io/scheme</span>: <span style="color:#ae81ff">internal</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">alb.ingress.kubernetes.io/target-type</span>: <span style="color:#ae81ff">ip</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">alb.ingress.kubernetes.io/backend-protocol</span>: <span style="color:#ae81ff">HTTP</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">alb.ingress.kubernetes.io/listen-ports</span>: <span style="color:#e6db74">&#39;[{&#34;HTTP&#34;:80}, {&#34;HTTPS&#34;:443}]&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">alb.ingress.kubernetes.io/ssl-redirect</span>: <span style="color:#e6db74">&#39;443&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">aws</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">serviceType: ClusterIP # &lt;- Used with target-type</span>: <span style="color:#ae81ff">ip</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">backendProtocolVersion</span>: <span style="color:#ae81ff">GRPC</span>
</span></span></code></pre></div><ul>
<li>GKE Application Load Balancer</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">global</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">domain</span>: <span style="color:#ae81ff">argocd.example.com</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">configs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">params</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server.insecure</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">server</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">service</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">annotations</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">cloud.google.com/neg</span>: <span style="color:#e6db74">&#39;{&#34;ingress&#34;: true}&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">cloud.google.com/backend-config</span>: <span style="color:#e6db74">&#39;{&#34;ports&#34;: {&#34;http&#34;:&#34;argocd-server&#34;}}&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ingress</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">controller</span>: <span style="color:#ae81ff">gke</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">gke</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">backendConfig</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">healthCheck</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">checkIntervalSec</span>: <span style="color:#ae81ff">30</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">timeoutSec</span>: <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">healthyThreshold</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">unhealthyThreshold</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">type</span>: <span style="color:#ae81ff">HTTP</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">requestPath</span>: <span style="color:#ae81ff">/healthz</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">port</span>: <span style="color:#ae81ff">8080</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">frontendConfig</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">redirectToHttps</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span> 
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">managedCertificate</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div></li>
<li>
<p>安装ArgoCD</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 默认安装到default命名空间</span>
</span></span><span style="display:flex;"><span>helm install argocd ./argo-cd
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 自定义命名空间</span>
</span></span><span style="display:flex;"><span>helm install --set namespaceOverride<span style="color:#f92672">=</span>my-namespace argocd ./argo-cd --namespace my-namespace --create-namespace
</span></span></code></pre></div></li>
<li>
<p>验证安装</p>
</li>
</ol>
<p>执行完<code>helm install</code>命令后，如果按照正常，你会看到一段ArgoCD的安装日志，类似于：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>In order to access the server UI you have the following options:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1. kubectl port-forward service/argocd-server -n argocd 8080:8080
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    and <span style="color:#66d9ef">then</span> open the browser on http://localhost:8080 and accept the certificate
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>2. enable ingress in the values file <span style="color:#e6db74">`</span>server.ingress.enabled<span style="color:#e6db74">`</span> and either
</span></span><span style="display:flex;"><span>      - Add the annotation <span style="color:#66d9ef">for</span> ssl passthrough: https://argo-cd.readthedocs.io/en/stable/operator-manual/ingress/#option-1-ssl-passthrough
</span></span><span style="display:flex;"><span>      - Set the <span style="color:#e6db74">`</span>configs.params.<span style="color:#e6db74">&#34;server.insecure&#34;</span><span style="color:#e6db74">`</span> in the values file and terminate SSL at your ingress: https://argo-cd.readthedocs.io/en/stable/operator-manual/ingress/#option-2-multiple-ingress-objects-and-hosts
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>After reaching the UI the first time you can login with username: admin and the random password generated during the installation. You can find the password by running:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{.data.password}&#34;</span> | base64 -d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>You should delete the initial secret afterwards as suggested by the Getting Started Guide: https://argo-cd.readthedocs.io/en/stable/getting_started/#4-login-using-the-cli<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>After reaching the UI the first time you cannot login with username and password since you<span style="color:#960050;background-color:#1e0010">&#39;</span>ve disabled it. You should enable admin back or configure Dex via <span style="color:#e6db74">`</span>configs.cm.dex.config<span style="color:#e6db74">`</span> or OIDC via <span style="color:#e6db74">`</span>configs.cm.oidc.config<span style="color:#e6db74">`</span>.
</span></span></code></pre></div><p>根据提示先设置端口转发然后打开网页就能看到下面内容</p>
<p><img src="https://res.cloudinary.com/xinta/image/upload/v1741053739/blogimage/argo_login.jpg" alt="argocd_login"></p>
<p>使用上面提示的命令获取密码并登录即可。</p>
<p><img src="https://res.cloudinary.com/xinta/image/upload/v1741054245/blogimage/argocd_ui.png" alt="argocd_ui"></p>
        </article>
  </div>
</section>



<aside id="meta">

<div>
	<section id="datecount">
		<h4 id="date"> Mon Feb 24, 2025 </h4>
		<h5 id="wc"> 1200 字数 </h5>
		<h5 id="readtime"> 需要阅读 3 分钟 </h5>
	</section>
	<ul id="categories">
	
		<li><a href="https://blog.lkjxblog.site//topics/devops">Devops</a> </li>
	
	</ul>
	<ul id="tags">
	
		<li> <a href="https://blog.lkjxblog.site//tags/devops">devops</a> </li>
	
		<li> <a href="https://blog.lkjxblog.site//tags/argocd">ArgoCD</a> </li>
	
	</ul>
</div>

<div>
	<section id="prev">
		&nbsp;<a class="previous" href="https://blog.lkjxblog.site/about/"><i class="icon-nixon-arrow-left"></i> 关于</a><br>
	</section>
	<section id="next">
		&nbsp;<a class="next" href="https://blog.lkjxblog.site/%E4%BD%BF%E7%94%A8argocd%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8/">使用ArgoCD部署应用 <i class="icon-nixon-arrow-right"></i></a>
	</section>
</div>


</aside>

<meta itemprop="wordCount" content="1119">
<meta itemprop="datePublished" content="2025-02-24">
<meta itemprop="url" content="https://blog.lkjxblog.site/%E5%AE%89%E8%A3%85argocd/">


<aside id=comments>
 <div><h2> Comments </h2></div>

<div id="container"></div>
<script src="https://beaudar.lipk.org/client.js"
        repo="tokyo2006/tokyo2006.github.io"
        issue-term="url"
        branch="master"
        theme="preferred-color-scheme"
        comment-order="desc"
        crossorigin="anonymous"
        label="comment"
        async>
</script>

</aside>

<footer>
	<div>
		<p>
			Copyright &copy; 2025
			
			<span itemprop="author" itemscope itemtype="https://schema.org/Person">
				<span itemprop="name">Chen Zeng.</span>
			</span>
			
			<a rel="license" href="https://blog.lkjxblog.site/license/"
				title="Creative Commons Attribution">all rights reserved</a>; Powered by <a
				href="https://gohugo.io">Hugo</a>.
		</p>
	</div>
</footer>
<script type="text/javascript">
	(function () {
		var j = function (a, b) {
			return window.getComputedStyle ? getComputedStyle(a).getPropertyValue(b) : a.currentStyle[b]
		};
		var k = function (a, b, c) {
			if (a.addEventListener) a.addEventListener(b, c, false);
			else a.attachEvent('on' + b, c)
		};
		var l = function (a, b) {
			for (key in b)
				if (b.hasOwnProperty(key)) a[key] = b[key];
			return a
		};
		window.fitText = function (d, e, f) {
			var g = l({
				'minFontSize': -1 / 0,
				'maxFontSize': 1 / 0
			}, f);
			var h = function (a) {
				var b = e || 1;
				var c = function () {
					a.style.fontSize = Math.max(Math.min(a.clientWidth / (b * 10), parseFloat(g
						.maxFontSize)), parseFloat(g.minFontSize)) + 'px'
				};
				c();
				k(window, 'resize', c)
			};
			if (d.length)
				for (var i = 0; i < d.length; i++) h(d[i]);
			else h(d);
			return d
		}
	})();
	fitText(document.getElementById('title'), 1)

</script>

</body>

</html>

